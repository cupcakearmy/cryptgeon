version: '3.9'

services:
  redis:
    image: redis:7-alpine
    # Set a size limit. See link below on how to customise.
    # https://redis.io/docs/manual/eviction/
    command: redis-server --maxmemory 200mb --maxmemory-policy allkeys-lru

  app:
    image: cupcakearmy/cryptgeon:latest
    depends_on:
      - redis
    environment:
      # Size limit for a single note.
      SIZE_LIMIT: 28 MiB
      MAX_VIEWS: 20
      MAX_EXPIRATION: 360
      ALLOW_ADVANCED: true
      VERBOSITY: error
      THEME_IMAGE: "https://images.llfapp.com/copy_logo.jpg"
      THEME_TEXT: "飞鸽传书，一键传输完全加密的密信或文件，阅后即焚。"
      THEME_PAGE_TITLE: "飞鸽传书 | 加密文本传输，阅后即焚"
      THEME_FAVICON: "https://images.llfapp.com/paper.png"
    ports:
      - 2000:8000
